diff '--color=auto' -ur onnx-1.18.0.orig/CMakeLists.txt onnx-1.18.0/CMakeLists.txt
--- onnx-1.18.0.orig/CMakeLists.txt	2025-08-07 14:16:53.282358964 +0200
+++ onnx-1.18.0/CMakeLists.txt	2025-08-07 14:18:55.148778209 +0200
@@ -493,7 +493,6 @@
 else()
   # On non-Windows, hide all symbols we don't need
   set(ONNX_API_DEFINE "-DONNX_API=__attribute__\(\(__visibility__\(\"default\"\)\)\)")
-  set_target_properties(onnx_proto PROPERTIES CXX_VISIBILITY_PRESET hidden)
   set_target_properties(onnx_proto PROPERTIES VISIBILITY_INLINES_HIDDEN 1)
 endif()
 target_compile_definitions(onnx_proto PRIVATE ${ONNX_API_DEFINE})
@@ -521,7 +520,6 @@
 else()
   add_library(onnx ${ONNX_SRCS})
 endif()
-set_target_properties(onnx PROPERTIES CXX_VISIBILITY_PRESET hidden)
 set_target_properties(onnx PROPERTIES VISIBILITY_INLINES_HIDDEN ON)
 
 target_include_directories(onnx PUBLIC
